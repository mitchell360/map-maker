<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Historical Map - LLM Instructions</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
      color: #333;
    }
    h1 {
      color: #0369a1;
      border-bottom: 3px solid #0369a1;
      padding-bottom: 10px;
    }
    h2 {
      color: #0369a1;
      margin-top: 30px;
    }
    h3 {
      color: #6b7280;
      margin-top: 20px;
    }
    code {
      background: #1f2937;
      color: #10b981;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 0.9em;
    }
    pre {
      background: #1f2937;
      color: #e5e7eb;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      border-left: 4px solid #0369a1;
    }
    pre code {
      background: transparent;
      color: #e5e7eb;
      padding: 0;
    }
    .parameter {
      background: white;
      padding: 15px;
      margin: 15px 0;
      border-radius: 6px;
      border-left: 4px solid #0369a1;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .parameter strong {
      color: #0369a1;
    }
    ul {
      background: white;
      padding: 20px 20px 20px 40px;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    li {
      margin: 8px 0;
    }
    .example {
      background: #f0f9ff;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #0ea5e9;
    }
    .tip {
      background: #fefce8;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #eab308;
    }
    .note {
      background: #f0fdf4;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #22c55e;
    }
  </style>
</head>
<body>
  <h1>Historical Map URL Construction Instructions for LLMs</h1>

  <h2>Service Overview</h2>
  <p>This is a historical map visualization service that displays locations on ancient and modern maps using Leaflet.js. It supports two types of locations: <strong>chronological</strong> (connected journey points) and <strong>reference</strong> (standalone locations).</p>

  <h2>Base URL Structure</h2>
  <pre><code>https://[domain]/?[parameters]</code></pre>

  <h2>Query Parameters</h2>

  <h3>1. Chronological Locations (Blue Markers - Connected Journey)</h3>
  <div class="parameter">
    <strong>Parameter:</strong> <code>chrono</code><br>
    <strong>Format:</strong> Pipe-separated location names<br>
    <strong>Example:</strong> <code>chrono=Antioch,Turkey|Philippi,Greece|Ephesus,Turkey|Rome,Italy</code>
  </div>

  <div class="parameter">
    <strong>Parameter:</strong> <code>chronoLabels</code><br>
    <strong>Format:</strong> Pipe-separated labels with %0A for newlines<br>
    <strong>Example:</strong> <code>chronoLabels=Antioch%0A47-48 AD|Philippi%0A49-50 AD</code>
  </div>

  <h3>2. Reference Locations (Red Markers - Standalone)</h3>
  <div class="parameter">
    <strong>Parameter:</strong> <code>reference</code><br>
    <strong>Format:</strong> Pipe-separated location names<br>
    <strong>Example:</strong> <code>reference=Jerusalem,Israel|Athens,Greece</code>
  </div>

  <div class="parameter">
    <strong>Parameter:</strong> <code>referenceLabels</code><br>
    <strong>Format:</strong> Pipe-separated labels with %0A for newlines<br>
    <strong>Example:</strong> <code>referenceLabels=Jerusalem%0AHoly City|Athens%0APhilosophy Center</code>
  </div>

  <h2>URL Encoding Rules</h2>
  <ul>
    <li>Use pipe <code>|</code> to separate multiple locations or labels</li>
    <li>Use <code>%0A</code> to create newlines within labels</li>
    <li>Use <code>%20</code> or <code>+</code> for spaces</li>
    <li>Separate parameters with <code>&</code></li>
  </ul>

  <h2>Construction Steps for LLMs</h2>

  <h3>Step 1: Identify Location Types</h3>
  <ul>
    <li><strong>Chronological:</strong> Locations that form a journey in sequence (will be connected)</li>
    <li><strong>Reference:</strong> Standalone locations for context (not connected)</li>
  </ul>

  <h3>Step 2: Format Locations</h3>
  <ul>
    <li>Each location should be specific: "City, Country" format works best</li>
    <li>Example: "Rome, Italy" not just "Rome"</li>
  </ul>

  <h3>Step 3: Create Labels (Optional)</h3>
  <ul>
    <li>First line is the location name (displays on map)</li>
    <li>Additional lines provide historical context</li>
    <li>Use %0A between lines</li>
  </ul>

  <h3>Step 4: Construct URL</h3>
  <pre><code>?chrono=Location1|Location2|Location3&chronoLabels=Label1%0ADetails|Label2%0ADetails&reference=RefLoc1&referenceLabels=RefLabel1%0ADetails</code></pre>

  <h2>Example URLs</h2>

  <div class="example">
    <h3>Simple Journey</h3>
    <code>?chrono=Jerusalem,Israel|Damascus,Syria|Antioch,Turkey</code>
  </div>

  <div class="example">
    <h3>Journey with Labels</h3>
    <code>?chrono=Rome,Italy|Corinth,Greece&chronoLabels=Rome%0ACapital of Empire%0A1st Century AD|Corinth%0AMajor Port City%0A50 AD</code>
  </div>

  <div class="example">
    <h3>Journey + Reference Locations</h3>
    <code>?chrono=Antioch,Turkey|Philippi,Greece|Rome,Italy&chronoLabels=Antioch%0AStart|Philippi%0AFirst European Church|Rome%0AEnd&reference=Jerusalem,Israel&referenceLabels=Jerusalem%0ABirthplace of Christianity</code>
  </div>

  <h2>Tips for LLMs</h2>
  <div class="tip">
    <ul>
      <li><strong>Always specify country/region</strong> with city names for accurate geocoding</li>
      <li><strong>Match label count to location count</strong> - one label per location</li>
      <li><strong>Use %0A for line breaks</strong> in labels, not actual newlines</li>
      <li><strong>Chronological order matters</strong> - locations will be connected in the order specified</li>
      <li><strong>Reference locations are independent</strong> - they won't be connected to anything</li>
      <li><strong>Keep URLs under 8000 characters</strong> for compatibility</li>
    </ul>
  </div>

  <h2>Map Features</h2>
  <div class="note">
    <ul>
      <li><strong>Base Maps:</strong> Ancient World (DARE), Modern Clean, Modern Detailed</li>
      <li><strong>Overlays:</strong> Country Borders, Walking Paths (between chronological locations), Travel Time estimates</li>
      <li><strong>Interactions:</strong> Click markers for detailed popups, toggle layers in top-right control</li>
      <li><strong>Instructions Link:</strong> In the top-right corner of the map (below the layers control), users can click "Instructions for using this Map Maker" to return to this documentation page</li>
    </ul>
  </div>

  <h2>Response Format</h2>
  <p>When generating URLs, provide:</p>
  <ul>
    <li>The complete URL</li>
    <li>Brief explanation of what it displays</li>
    <li>Note if any features require user interaction (like toggling overlays)</li>
  </ul>

  <h2>Error Handling</h2>
  <ul>
    <li>Invalid locations will be skipped (geocoding failure)</li>
    <li>Missing labels default to location names</li>
    <li>Empty parameters are ignored</li>
  </ul>

</body>
</html>
