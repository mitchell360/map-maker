{
  "service": "Historical Map Visualization",
  "service_url": "https://mitchell360.com/map-maker/",
  "last_updated": "2025-10-28",
  "documentation": {
    "human_readable_instructions": "https://mitchell360.com/map-maker/llm-instructions.html",
    "json_instructions": "https://mitchell360.com/map-maker/llm-instructions.json",
    "note": "For more detailed, formatted instructions with examples and visual guidance, LLMs can optionally visit the HTML version of these instructions at the human_readable_instructions URL above. The HTML page provides the same information in a more structured, easy-to-read format with color-coded sections, detailed examples, and step-by-step guidance."
  },
  "critical_information": {
    "title": "FOOLPROOF FORMAT - No More Count Mismatches",
    "description": "Locations and labels are BOUND TOGETHER using ~ (tilde) separator within a single parameter. This architecture makes it IMPOSSIBLE to create count mismatch errors.",
    "key_rule": "Every location MUST be paired with its label using ~ before adding it to the URL",
    "format": "Location~Label (bound together, then separate pairs with |)"
  },
  "breaking_changes": {
    "date": "2025-10-28",
    "change": "NEW PARAMETER FORMAT: Locations and labels combined in single parameters using ~ separator",
    "new_parameters": ["chronoLocationsAndLabels", "referenceLocationsAndLabels"],
    "deprecated_parameters": ["chrono", "chronoLabels", "reference", "referenceLabels"],
    "backward_compatibility": "Old parameters still work but display deprecation warning in console"
  },
  "base_url_pattern": "https://mitchell360.com/map-maker/?[parameters]",
  "parameters": {
    "chronoLocationsAndLabels": {
      "description": "Combined parameter for chronological locations (blue markers, connected with walking paths). Each location is BOUND to its label using ~ separator.",
      "mandatory_structure": "Each entry MUST have format: Location~Label",
      "format": "Location1~Label1|Location2~Label2|Location3~Label3",
      "separators": {
        "location_to_label": "~ (tilde) - BINDS each location to its metadata (MANDATORY)",
        "between_pairs": "| (pipe) - separates multiple location-label pairs",
        "newline_in_label": "%0A - creates newline within label text",
        "blank_line_in_label": "%0A%0A - creates blank line within label text"
      },
      "location_format": "City, Country (e.g., 'Rome, Italy' not just 'Rome')",
      "label_format_5_line": {
        "line_1": "Location name only (becomes marker label and popup title)",
        "line_2": "Historical context in format: 'YEAR AD: AncientName, AncientRegion'",
        "line_3": "Modern context in format: 'YEAR AD: ModernName, ModernCountry'",
        "line_4": "Blank line using %0A%0A for spacing",
        "line_5_plus": "Detailed historical description (can span multiple lines)"
      },
      "example_minimal": "Damascus,Syria~Damascus|Antioch,Turkey~Antioch|Rome,Italy~Rome",
      "example_rich": "Antioch,Turkey~Antioch%0A47-48 AD: Antioch, Syria%0A2025 AD: Antakya, Turkey%0A%0AAntioch served as Paul's primary mission base.|Rome,Italy~Rome%0A60-62 AD: Rome, Roman Empire%0A2025 AD: Rome, Italy%0A%0APaul was held under house arrest in Rome.",
      "complete_working_url": "https://mitchell360.com/map-maker/?chronoLocationsAndLabels=Damascus,Syria~Damascus%0A32 AD|Antioch,Turkey~Antioch%0A47 AD|Rome,Italy~Rome%0A62 AD"
    },
    "referenceLocationsAndLabels": {
      "description": "Combined parameter for reference locations (red markers, standalone, not connected). Each location is BOUND to its label using ~ separator.",
      "mandatory_structure": "Each entry MUST have format: Location~Label",
      "format": "Location1~Label1|Location2~Label2",
      "separators": "Same as chronological locations (~ binds location to label, | separates pairs)",
      "label_format": "Same 5-line structure recommended as chronological locations",
      "example": "Jerusalem,Israel~Jerusalem%0A33 AD: Jerusalem, Judea%0A2025 AD: Jerusalem, Israel%0A%0AThe Church's birthplace and site of Pentecost.",
      "complete_working_url": "https://mitchell360.com/map-maker/?referenceLocationsAndLabels=Jerusalem,Israel~Jerusalem%0A33 AD"
    }
  },
  "step_by_step_construction": {
    "step_1": {
      "title": "List your locations",
      "description": "Write out each location in 'City, Country' format",
      "example": ["Damascus, Syria", "Antioch, Turkey", "Philippi, Greece", "Rome, Italy"]
    },
    "step_2": {
      "title": "Create label for EACH location",
      "description": "CRITICAL: You must create a label for every single location using 5-line format",
      "example_labels": [
        "Damascus%0A32 AD: Damascus, Syria%0A2025 AD: Damascus, Syria%0A%0AConversion of Saul",
        "Antioch%0A47 AD: Antioch, Syria%0A2025 AD: Antakya, Turkey%0A%0AMission base",
        "Philippi%0A50 AD: Philippi, Macedonia%0A2025 AD: Filippoi, Greece%0A%0AFirst European church",
        "Rome%0A62 AD: Rome, Roman Empire%0A2025 AD: Rome, Italy%0A%0AHouse arrest ministry"
      ]
    },
    "step_3": {
      "title": "Bind each location to its label with ~",
      "description": "MANDATORY: Connect each location to its label using tilde separator",
      "example_bindings": [
        "Damascus,Syria~Damascus%0A32 AD: Damascus, Syria%0A2025 AD: Damascus, Syria%0A%0AConversion of Saul",
        "Antioch,Turkey~Antioch%0A47 AD: Antioch, Syria%0A2025 AD: Antakya, Turkey%0A%0AMission base",
        "Philippi,Greece~Philippi%0A50 AD: Philippi, Macedonia%0A2025 AD: Filippoi, Greece%0A%0AFirst European church",
        "Rome,Italy~Rome%0A62 AD: Rome, Roman Empire%0A2025 AD: Rome, Italy%0A%0AHouse arrest ministry"
      ]
    },
    "step_4": {
      "title": "Join pairs with | (pipe)",
      "description": "Connect all location~label pairs using pipe character",
      "result": "Damascus,Syria~Damascus%0A32 AD|Antioch,Turkey~Antioch%0A47 AD|Philippi,Greece~Philippi%0A50 AD|Rome,Italy~Rome%0A62 AD"
    },
    "step_5": {
      "title": "Add parameter name and build final URL",
      "description": "Prepend parameter name and base URL",
      "final_url": "https://mitchell360.com/map-maker/?chronoLocationsAndLabels=Damascus,Syria~Damascus%0A32 AD|Antioch,Turkey~Antioch%0A47 AD|Philippi,Greece~Philippi%0A50 AD|Rome,Italy~Rome%0A62 AD"
    }
  },
  "common_mistakes_to_avoid": {
    "error_1": {
      "title": "Using separate arrays (old deprecated format)",
      "wrong_example": "?chrono=Damascus,Syria|Antioch,Turkey|Philippi,Greece|Rome,Italy&chronoLabels=Damascus|Antioch|Philippi",
      "problem": "4 locations but only 3 labels = count mismatch error",
      "correct_approach": "Use new format with ~ to bind each location to its label"
    },
    "error_2": {
      "title": "Missing ~ separator",
      "wrong_example": "?chronoLocationsAndLabels=Damascus,Syria|Antioch,Turkey|Rome,Italy",
      "problem": "No labels provided, only locations listed",
      "correct_approach": "MUST bind each location to label: Damascus,Syria~Damascus|Antioch,Turkey~Antioch"
    },
    "error_3": {
      "title": "Wrong separator character",
      "wrong_example": "?chronoLocationsAndLabels=Damascus,Syria:Damascus|Antioch,Turkey:Antioch",
      "problem": "Using : (colon) instead of ~ (tilde)",
      "correct_approach": "Must use ~ to bind location to label"
    },
    "error_4": {
      "title": "Actual line breaks instead of %0A",
      "problem": "Using real newline characters in URL instead of encoded %0A",
      "correct_approach": "Always use %0A for newlines, %0A%0A for blank lines"
    }
  },
  "pre_construction_validation_checklist": [
    "Every location is in 'City, Country' format (e.g., 'Rome, Italy' not 'Rome')",
    "Every location has a corresponding label created",
    "Each location~label pair uses ~ (tilde) to bind them together",
    "Multiple pairs are separated by | (pipe)",
    "Labels use %0A for newlines, not actual line breaks",
    "The parameter name is 'chronoLocationsAndLabels' (not 'chrono')",
    "URL starts with 'https://mitchell360.com/map-maker/?'"
  ],
  "complete_working_examples": [
    {
      "title": "Example 1: Simple 2-Location Journey",
      "url": "https://mitchell360.com/map-maker/?chronoLocationsAndLabels=Damascus,Syria~Damascus%0A32 AD|Antioch,Turkey~Antioch%0A47 AD",
      "displays": "Two blue markers connected by walking path with minimal labels"
    },
    {
      "title": "Example 2: Rich 3-Location Journey",
      "url": "https://mitchell360.com/map-maker/?chronoLocationsAndLabels=Antioch,Turkey~Antioch%0A47-48 AD: Antioch, Syria%0A2025 AD: Antakya, Turkey%0A%0AAntioch served as Paul's primary mission base for ministry to the Gentiles.|Philippi,Greece~Philippi%0A49-50 AD: Philippi, Macedonia%0A2025 AD: Filippoi, Greece%0A%0APhilippi was the first European city where Paul established a Christian congregation.|Rome,Italy~Rome%0A60-62 AD: Rome, Roman Empire%0A2025 AD: Rome, Italy%0A%0APaul was held under house arrest in Rome.",
      "displays": "Three locations with rich historical context in popups"
    },
    {
      "title": "Example 3: Journey + Reference Location",
      "url": "https://mitchell360.com/map-maker/?chronoLocationsAndLabels=Antioch,Turkey~Antioch%0A47 AD|Rome,Italy~Rome%0A62 AD&referenceLocationsAndLabels=Jerusalem,Israel~Jerusalem%0A33 AD: Jerusalem, Judea%0A2025 AD: Jerusalem, Israel%0A%0AThe Church's birthplace",
      "displays": "Two blue markers (connected journey) + one red marker (standalone reference)"
    },
    {
      "title": "Example 4: Paul's Complete Second Missionary Journey",
      "url": "https://mitchell360.com/map-maker/?chronoLocationsAndLabels=Antioch,Turkey~Antioch%0A49 AD|Derbe,Turkey~Derbe%0A49 AD|Lystra,Turkey~Lystra%0A49 AD|Iconium,Turkey~Iconium%0A49 AD|Philippi,Greece~Philippi%0A50 AD|Thessalonica,Greece~Thessalonica%0A50 AD|Berea,Greece~Berea%0A50 AD|Athens,Greece~Athens%0A51 AD|Corinth,Greece~Corinth%0A51-52 AD",
      "displays": "Complete journey with 9 connected locations showing full missionary route"
    }
  ],
  "encoding_reference": {
    "tilde": "~ - Use as-is (CRITICAL separator that binds location to label)",
    "pipe": "| - Use as-is (separates multiple location-label pairs)",
    "newline": "%0A - Newline character within labels",
    "blank_line": "%0A%0A - Blank line (double newline) within labels",
    "space": "%20 - Space character (usually automatic in URL encoding)",
    "ampersand": "& - Separates different parameters"
  },
  "placeholder_handling": {
    "when_incomplete_data": "Use 'Location~TBD' to explicitly mark incomplete data",
    "tbd_behavior": "Map displays prominent 'TBD' warning in popup to alert user",
    "tbd_example": "Damascus,Syria~TBD",
    "tbd_message_displayed": "TBD / TBD: Location information not provided / 2025 AD: Unknown / Please provide complete location details."
  },
  "final_validation_before_providing_url": [
    "URL starts with 'https://mitchell360.com/map-maker/?'",
    "Every ~ has a location on left side and label on right side",
    "All location~label pairs are separated by |",
    "Labels use %0A for line breaks (not actual newlines)",
    "URL is under 8000 characters for compatibility",
    "Parameter name is 'chronoLocationsAndLabels' or 'referenceLocationsAndLabels'"
  ],
  "map_features": {
    "base_maps": [
      "Ancient World (DARE) - Default historical map",
      "Modern Clean (CartoDB Positron)",
      "Modern Detailed (OpenStreetMap)"
    ],
    "overlays": [
      "Country Borders - Political boundaries",
      "Walking Paths - Routes connecting chronological locations",
      "Travel Time - Ancient travel time estimates"
    ],
    "interactions": [
      "Click/tap markers for detailed popups (drawer on mobile, popup on desktop)",
      "Toggle layers in top-right control",
      "Mobile: Swipe down or tap backdrop to close drawer",
      "Desktop: Traditional popup with click interaction"
    ],
    "responsive_design": {
      "mobile_breakpoint": "≤768px",
      "mobile_ui": "Bottom drawer slides up on marker tap, swipe gestures supported",
      "desktop_ui": "Traditional popups with click interaction",
      "instructions_link": "Top-right on desktop, bottom-right '?' icon on mobile"
    }
  },
  "tips": [
    "CRITICAL: Always use ~ (tilde) to bind each location to its label",
    "MANDATORY: Every location must have a label bound to it with ~",
    "Count mismatches are IMPOSSIBLE with this format (location and label bound together)",
    "Always specify country/region with city names (e.g., 'Rome, Italy' not 'Rome')",
    "Use rich 5-line label format for professional, information-rich popups",
    "First line of each label becomes the marker name displayed on map",
    "Lines 2-3 appear in gray as historical/modern context",
    "Line 5+ becomes the main description text in popup",
    "Use %0A for line breaks, %0A%0A for blank lines between sections",
    "Chronological locations are connected by walking paths in the order specified",
    "Reference locations are standalone and never connected to anything",
    "Keep URLs under 8000 characters for maximum compatibility",
    "Test your URL structure before providing to ensure all ~ separators are present"
  ],
  "response_format_recommendation": {
    "when_providing_urls_to_users": [
      "Provide complete working URL that starts with https://mitchell360.com/map-maker/?",
      "Include brief description (e.g., 'This map shows Paul's second missionary journey with 6 locations')",
      "Note any optional features (e.g., 'Toggle Walking Paths overlay to see routes between locations')",
      "Mention mobile-friendly design if relevant to user's context"
    ]
  },
  "backward_compatibility": {
    "deprecated_format": {
      "parameters": ["chrono", "chronoLabels", "reference", "referenceLabels"],
      "status": "Still supported but deprecated as of 2025-10-28",
      "warning": "Browser console displays deprecation warning when old format detected",
      "why_deprecated": "Separate arrays cause count mismatch errors that are impossible to debug",
      "migration_path": "Use new chronoLocationsAndLabels format where location and label are bound with ~"
    }
  },
  "error_handling": [
    "Invalid locations skipped (geocoding failure logged to console)",
    "Missing labels after ~ default to location name",
    "Empty parameters are ignored",
    "TBD labels display prominent placeholder warning",
    "Count mismatches IMPOSSIBLE with new format (fundamental architecture improvement)"
  ]
}
